/*! PopUp Pro - v4.6.15
 * http://premium.wpmudev.org/project/the-pop-over-plugin/
 * Copyright (c) 2014; * Licensed GPLv2+ */
(function(){function e(e){"closed"===s?e._show()?(u=e,s="open"):o(e):d[d.length]=e}function o(){if(s="closed",u=null,d.length>0){var o=d.shift();e(o)}}function t(e,o,t){var n,r,p=0,s=a(""+window.location),d=a(""+document.referrer),u=null,l=function l(o){u=jQuery.extend({},e),u.popup=o,i(u)};return void 0!==window.force_popover&&(p=""+window.force_popover),void 0!==o&&(p=""+o),e.ajax_data=e.ajax_data||{},r=jQuery.extend({},e.ajax_data),r.action="inc_popup",r["do"]=e["do"],r.thefrom=s,r.thereferrer=d,p&&(r.po_id=p),t&&(r.data=t),e.preview&&(r.preview=!0),n={url:e.ajaxurl,dataType:"jsonp",jsonpCallback:"po_data",data:r,success:function(e){l(e)},complete:function(){jQuery(document).trigger("popup-load-done",[u])}},jQuery.ajax(n)}function i(e){if(void 0!==e){var o=function o(e){void 0!==e&&(void 0!==e.popup&&void 0!==e.popup.html&&(jQuery('<style type="text/css">'+e.popup.styles+"</style>").appendTo("head"),jQuery(e.popup.html).appendTo("body").hide()),window.inc_popup=new p(e),window.inc_popups[window.inc_popups.length]=window.inc_popup,jQuery(document).trigger("popup-initialized",[window.inc_popup]),e.noinit||e.preview||window.inc_popup.init())};if(e.popup instanceof Array)for(var t=0;e.popup.length>t;t+=1){var i=jQuery.extend({},e);i.popup=e.popup[t],o(i)}else e instanceof Object&&o(e)}}function a(e){for(var o=[],t=0;e.length>t;t++){if(e.length>t+1){var i=e.charCodeAt(t),a=e.charCodeAt(t+1);if(i>=55296&&56319>=i&&56320===(64512&a)||a>=768&&879>=a){o.unshift(e.substring(t,t+2)),t++;continue}}o.unshift(e[t])}return o.join("")}var n=[],r=!1,p=function(i){var a=this,p=jQuery(document),s=jQuery(window),d=null,u=null,l=null,c=null,h=null,f=null,m=null,v=null;return this.data={},this.have_popup=!1,this.ajax_data={},this.opened=0,this.close_forever=function(){var e=a.data.expiry||365;return a.close_popup(),i.preview?!1:(a.set_cookie("po_h",1,e),!1)},this.close_popup=function(){return jQuery("html").removeClass("has-popup"),a.data.display_data.click_multi?(v.hide(),d.hide()):(v.remove(),d.remove(),a.have_popup=!1),p.trigger("popup-closed"),p.trigger("popover-closed"),o(a),!1},this.background_clicked=function(e){var o=jQuery(e.target);if(o.hasClass("wdpu-background")){if(!a.data.overlay_close)return;a.data.close_hide?a.close_forever():a.close_popup()}},this.move_popup=function(){var e,o,t,i=0,n=0;a.data.custom_size&&(a.data.height&&!isNaN(a.data.height)&&(f.data("reduce-height")&&(t=jQuery(f.data("reduce-height")),n=t.outerHeight()),o=a.data.height-n,100>o&&(o=100),f.height(o)),a.data.width&&!isNaN(a.data.width)&&(f.data("reduce-width")&&(t=jQuery(f.data("reduce-width")),i=t.outerWidth()),e=a.data.width-i,100>e&&(e=100),f.width(e)));var r=function r(){if(!h.hasClass("no-move-x")){var e=s.width(),o=u.outerWidth(),t=(e-o)/2;10>t&&(t=10),h.css({left:t})}if(!h.hasClass("no-move-y")){var i=s.height(),a=u.outerHeight(),n=(i-a)/2;10>n&&(n=10),h.css({top:n})}if(m.length){var r,p,d=m.width(),l=m.height(),c=m.parent().width(),f=m.parent().height();d>c?(r=(c-d)/2,m.css({"margin-left":r})):m.css({"margin-left":0}),l>f?(p=(f-l)/2,m.css({"margin-top":p})):m.css({"margin-top":0})}};window.setTimeout(r,20),r()},this.reject=function(){a.have_popup=!1,a.data={}},this.prepare=function(){if(a.fetch_dom(),d.css({opacity:0,"z-index":-1,position:"fixed",left:-1e3,width:100,right:"auto",top:-1e3,height:100,bottom:"auto"}).show(),p.trigger("popup-init",[a,a.data]),a.have_popup)switch(a.data.display){case"scroll":s.on("scroll",a.show_at_position);break;case"anchor":s.on("scroll",a.show_at_element);break;case"delay":var o=1e3*a.data.display_data.delay;"m"===a.data.display_data.delay_type&&(o*=60),window.setTimeout(function(){e(a)},o);break;default:window.setTimeout(function(){"function"==typeof a.custom_handler&&a.custom_handler(a)},20)}},this.show_at_position=function(){var o,t,i=jQuery(this),n=i.scrollTop();"px"===a.data.display_data.scroll_type?n>=a.data.display_data.scroll&&(s.off("scroll",a.show_at_position),e(a)):(o=p.height()-s.height(),t=100*n/o,t>=a.data.display_data.scroll&&(s.off("scroll",a.show_at_position),e(a)))},this.show_at_element=function(){var o=jQuery(a.data.display_data.anchor),t=s.scrollTop(),i=t+s.height(),n=o.offset().top,r=i-n;r>10&&(s.off("scroll",a.show_at_element),e(a))},this.show_popup=function(){e(a)},this._show=function(){var e;return d.length?(e=parseInt(a.get_cookie("po_c"),10),isNaN(e)&&(e=0),a.set_cookie("po_c",e+1),a.opened+=1,v.on("click",a.background_clicked),s.off("resize.popup").on("resize.popup",function(){a.move_popup(a.data)}),d.removeAttr("style").show(),v.show(),a.data.scroll_body?jQuery("html").addClass("has-popup can-scroll"):jQuery("html").addClass("has-popup no-scroll"),u.hide(),window.setTimeout(function(){u.show()},2),a.move_popup(a.data),a.setup_popup(),!0):!1},this.setup_popup=function(){c.off("click",a.close_forever).on("click",a.close_forever),a.data&&a.data.close_hide?l.off("click",a.close_forever).on("click",a.close_forever):l.off("click",a.close_popup).on("click",a.close_popup),u.hover(function(){jQuery(".claimbutton").removeClass("hide")},function(){jQuery(".claimbutton").addClass("hide")}),p.trigger("popup-displayed",[a.data,a]),p.trigger("popover-displayed",[a.data,a]),d.on("submit","form",a.form_submit)},this.fetch_dom=function(){d=jQuery("#"+a.data.html_id),d.length||a.reject(),f=d.find(".resize"),h=d.find(".move"),u=d.find(".wdpu-msg"),l=d.find(".wdpu-close"),c=d.find(".wdpu-hide-forever"),m=d.find(".wdpu-image > img"),d.hasClass("wdpu-background")?v=d:(v=d.find(".wdpu-background"),v.length||(v=d.parents(".wdpu-background"))),h.length||(h=d),f.length||(f=d)},this.load_popup=function(e,o){void 0===e&&i.preview||(a.have_popup=!1,t(i,e,o))},this.form_submit=function(){function e(){var e=!1;"complete"!==i[0].contentDocument.readyState||r?(s+=1,s>200&&(e=!0)):e=!0,e&&(window.clearInterval(t),o())}function o(){var e,o,t,r;p.trigger("popup-submit-process",[i,a,a.data]);try{t=jQuery(h,i[0].contentDocument),r=0===t.length}catch(s){t=jQuery("<html></html>"),r=!0}return l.removeClass("wdpu-loading"),e=t.find(".wdpu-msg-inner"),o=u.find(".wdpu-msg-inner"),jQuery("#wdpu-frame").remove(),r?(a.data.close_popup=!0,a.data.ajax_history=n,a.data.last_ajax=n.length?n[0]:!1,p.trigger("popup-submit-done",[a,a.data]),a.data.close_popup&&a.close_popup(),void 0):t.html().length?o.length&&e.length&&e.text().length?(o.replaceWith(e),a.fetch_dom(),p.trigger("popup-init",[a,a.data]),a.move_popup(),a.setup_popup(),p.trigger("popup-submit-done",[a,a.data]),void 0):(p.trigger("popup-submit-done",[a,a.data]),a.close_popup(),void 0):(p.trigger("popup-submit-done",[a,a.data]),void 0)}var t,i,s,d=jQuery(this),u=d.parents(".wdpu-container").first(),l=u.find(".wdpu-msg"),c=jQuery('<input type="hidden" name="_po_method_" />'),h=".wdpu-"+a.data.popup_id;return u.length?(i=jQuery('<iframe id="wdpu-frame" name="wdpu-frame"></iframe>').hide().appendTo("body"),d.attr("target","wdpu-frame"),c.appendTo(d).val("raw"),l.addClass("wdpu-loading"),s=0,t=window.setInterval(e,50),!0):!0},this.init=function(){i.popup?(a.have_popup=!0,a.data=i.popup,a.exec_scripts(),a.prepare()):a.load_popup()},this.exec_scripts=function(){var e;void 0!==a.data.script&&(e=Function("me",a.data.script),e(a))},this.get_cookie=function(e){var o,t,i,n=document.cookie.split(";");for(i=a.data&&a.data.popup_id?e+"-"+a.data.popup_id+"=":e+"=",o=0;n.length>o;o+=1){for(t=n[o];" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(i))return t.substring(i.length,t.length)}return null},this.set_cookie=function(e,o,t){var n,r,p;i.preview||(isNaN(t)?r="":(n=new Date,n.setTime(n.getTime()+1e3*60*60*24*t),r="; expires="+n.toGMTString()),p=a.data&&a.data.popup_id?e+"-"+a.data.popup_id:e,document.cookie=p+"="+o+r+"; path=/")},{init:a.init,load:a.load_popup,extend:a}},s="closed",d=[],u=null;jQuery(document).ajaxStart(function(){r=!0}),jQuery(document).ajaxComplete(function(e,o){r=!1,n.unshift(o)}),jQuery(function(){window.inc_popups=[],i(_popup_data)})})();